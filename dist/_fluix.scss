@mixin split($widths...) {

    $totalFixedWidth : 0;
    $counter         : 0;

    // The split is essentially a 'row', so include the clearfix mixin
    @include clearfix();

    // Sum the total of all fixed based widths
    @each $width in $widths {
        @if unit($width) == 'em' {
            $totalFixedWidth: $totalFixedWidth + $width;
        }
        @if unit($width) == 'px' {
            $totalFixedWidth: $totalFixedWidth + $width;
        }
        @if unit($width) == 'rem' {
            $totalFixedWidth: $totalFixedWidth + $width;
        }
    }

    // Distribute the columns acording to given width arguments
    @each $width in $widths {

        $counter: $counter + 1;

        // Set a fixed width column
        @if unit($width) == 'em' or unit($width) == 'rem' or unit($width) == 'px' {
            :nth-child(#{$counter}) {
                box-sizing: border-box;
                width: $width;
                float: left;
            }

        // Set a fluid width column
        } @else if unit($width) == '%' {
            :nth-child(#{$counter}) {
                box-sizing: border-box;
                float: left;

                // If there are non fixed width columns set the width exactly as it is passed as a argument
                @if $totalFixedWidth == 0 {
                    width: $width;

                // If there are fixed columns inside the row deduct those from the total fluid width
                } @else {
                    width: calc(#{$width} - #{$totalFixedWidth});
                }
            }
        }
    }

    // Include the contents of the mixi
    @content;

}
